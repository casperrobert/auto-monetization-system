<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Dashboard Â· CASPER SYSTEM 24</title>
  <link rel="stylesheet" href="styles.css">
  <script src="https://unpkg.com/web3@1.10.0/dist/web3.min.js"></script>
</head>
<body>
<header class="site-header">
  <div class="container header-inner">
    <a class="brand" href="index.html">CASPER SYSTEM 24</a>
    <nav class="site-nav"><a href="index.html">Home</a></nav>
  </div>
</header>

<main class="section">
  <div class="container">
    <h1>Realtime Dashboard</h1>
    <p class="muted">Einstellungen werden lokal gespeichert. Backendless ist optional.</p>

    <div class="grid-2">
      <section class="panel">
        <h2>1) Einstellungen</h2>
        <form class="cfg">
          <label>Affiliate-Tag (Amazon)<input id="cfg-aff" placeholder="dein-tag-21"></label>
          <label>Backendless APP_ID<input id="cfg-app" placeholder="APP_ID"></label>
          <label>Backendless API_KEY<input id="cfg-key" placeholder="REST_API_KEY"></label>
          <label>Log-Tabelle<input id="cfg-table" value="Transactions"></label>
          <div class="row">
            <button type="button" id="save-cfg" class="btn btn-primary">Speichern</button>
            <button type="button" id="clear-cfg" class="btn btn-ghost">LÃ¶schen</button>
          </div>
        </form>
      </section>

      <section class="panel">
        <h2>2) Wallet verbinden</h2>
        <button id="btn-connect" class="btn btn-primary">Mit MetaMask verbinden</button>
        <div id="wallet-info" class="tiny muted"></div>
        <div class="row">
          <label>Betrag (ETH)<input id="send-amount" type="number" step="0.0001" placeholder="0.01"></label>
          <label>An Adresse<input id="send-to" placeholder="0xEmpfÃ¤nger..."></label>
        </div>
        <button id="btn-send" class="btn">Test-Transaktion senden</button>
        <pre id="tx-out" class="code"></pre>
      </section>

      <section class="panel">
        <h2>3) Live-Preise</h2>
        <div class="row">
          <button id="btn-prices" class="btn">Aktualisieren</button>
          <span id="price-ts" class="tiny muted"></span>
        </div>
        <table class="table" id="price-table">
          <thead><tr><th>Asset</th><th>Preis (USD)</th><th>24h %</th></tr></thead>
          <tbody></tbody>
        </table>
      </section>

      <section class="panel">
        <h2>4) Affiliate-Link Generator</h2>
        <label>Amazon-Produkt-URL<input id="aff-url" placeholder="https://www.amazon.de/dp/ASINâ€¦"></label>
        <button id="btn-build" class="btn">Link erzeugen</button>
        <input id="aff-out" readonly placeholder="Ergebnis erscheint hier">
      </section>

      <section class="panel">
        <h2>5) Einnahmen-Log</h2>
        <div class="row">
          <label>Betrag<input id="log-amount" type="number" step="0.01" placeholder="5.00"></label>
          <label>Quelle<input id="log-source" placeholder="Amazon / Shoop / Crypto"></label>
          <button id="btn-log" class="btn">Speichern</button>
        </div>
        <table class="table" id="log-table">
          <thead><tr><th>Zeit</th><th>Quelle</th><th>Betrag</th></tr></thead>
          <tbody></tbody>
        </table>
      </section>

      <!-- NEW P&L HELPER SECTION -->
      <section class="panel" id="pl-section">
        <h2>6) P&L Helper ðŸ“Š</h2>
        
        <!-- P&L Transaction Entry -->
        <div class="pl-entry">
          <h3>Transaktion hinzufÃ¼gen</h3>
          <div class="row">
            <label>Asset<input id="pl-asset" placeholder="BTC, ETH, etc."></label>
            <label>Typ
              <select id="pl-type">
                <option value="buy">Kauf</option>
                <option value="sell">Verkauf</option>
              </select>
            </label>
          </div>
          <div class="row">
            <label>Menge<input id="pl-amount" type="number" step="0.00001" placeholder="0.1"></label>
            <label>Preis (USD)<input id="pl-price" type="number" step="0.01" placeholder="45000"></label>
          </div>
          <div class="row">
            <label>Datum<input id="pl-date" type="datetime-local"></label>
            <button id="btn-add-pl" class="btn btn-primary">HinzufÃ¼gen</button>
          </div>
        </div>

        <!-- P&L Summary -->
        <div class="pl-summary">
          <h3>P&L Ãœbersicht</h3>
          <div class="grid-3">
            <div class="stat-card">
              <h4>Gesamt P&L</h4>
              <span id="total-pl" class="stat-value">$0.00</span>
            </div>
            <div class="stat-card">
              <h4>Heute P&L</h4>
              <span id="today-pl" class="stat-value">$0.00</span>
            </div>
            <div class="stat-card">
              <h4>Portfolio Wert</h4>
              <span id="portfolio-value" class="stat-value">$0.00</span>
            </div>
          </div>
        </div>

        <!-- P&L Transactions Table -->
        <div class="pl-transactions">
          <h3>P&L Transaktionen</h3>
          <div class="row">
            <button id="btn-export-pl" class="btn">Export CSV</button>
            <button id="btn-clear-pl" class="btn btn-ghost">Alle lÃ¶schen</button>
          </div>
          <table class="table" id="pl-table">
            <thead>
              <tr>
                <th>Datum</th>
                <th>Asset</th>
                <th>Typ</th>
                <th>Menge</th>
                <th>Preis</th>
                <th>Wert</th>
                <th>P&L</th>
                <th>Aktion</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>

        <!-- Portfolio Holdings -->
        <div class="portfolio-holdings">
          <h3>Portfolio Holdings</h3>
          <table class="table" id="holdings-table">
            <thead>
              <tr>
                <th>Asset</th>
                <th>Menge</th>
                <th>Ã˜ Kaufpreis</th>
                <th>Aktueller Preis</th>
                <th>Wert</th>
                <th>P&L</th>
                <th>P&L %</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </section>
    </div>
  </div>
</main>

<footer class="site-footer">
  <div class="container footer-inner">Â© <span id="year"></span> CASPER SYSTEM 24</div>
</footer>

<script src="js/erc20.js"></script>
<script src="js/dashboard.js"></script>
<script src="js/pl-helper.js"></script>
</body>
</html>